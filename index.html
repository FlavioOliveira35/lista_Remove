<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gerenciamento de Marmoraria v4</title>
    <!-- Font Awesome para Ícones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- Chart.js para Gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script> <!-- Adaptador de data -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0"></script> <!-- Plugin para labels nos gráficos -->
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/dist/date-fns.min.js"></script> <!-- date-fns para manipulação de datas -->
    <script src="https://cdn.jsdelivr.net/npm/date-fns/locale/pt-BR/index.js"></script> <!-- locale pt-BR para date-fns -->

    <style>
        /* Estilos Gerais */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary-color: #2c3e50; /* Azul Escuro */
            --secondary-color: #3498db; /* Azul Claro */
            --accent-color: #e74c3c; /* Vermelho */
            --light-color: #ecf0f1; /* Cinza Claro */
            --dark-color: #2c3e50;
            --success-color: #2ecc71; /* Verde */
            --warning-color: #f39c12; /* Laranja */
            --danger-color: #e74c3c;
            --info-color: #3498db;
            --shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }

        body {
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1300px;
            margin: 0 auto;
            padding: 20px;
        }

        h1, h2, h3, h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }

        h1 {
            font-size: 2.2rem;
            text-align: center;
            margin-bottom: 30px;
        }

        h2 {
            font-size: 1.8rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 10px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        h3 {
            font-size: 1.4rem;
            margin-bottom: 15px;
        }

        /* Botões */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            text-align: center;
            text-decoration: none;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .btn i {
            font-size: 1.1em;
        }

        .primary-btn {
            background-color: var(--secondary-color);
            color: white;
        }

        .primary-btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.15);
        }

        .secondary-btn {
            background-color: var(--light-color);
            color: var(--dark-color);
            border: 1px solid #ccc;
        }

        .secondary-btn:hover {
            background-color: #e0e0e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        /* Layout Principal */
        #main-content {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--shadow);
        }

        header h1 {
            color: white;
            margin: 0;
            font-size: 1.5rem;
        }

        nav {
            background-color: var(--secondary-color);
            padding: 0 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        nav ul {
            display: flex;
            list-style: none;
            overflow-x: auto;
            padding: 5px 0;
        }

        nav li {
            margin-right: 5px;
        }

        nav a {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 12px 18px;
            color: white;
            text-decoration: none;
            font-weight: 600;
            transition: var(--transition);
            white-space: nowrap;
            border-radius: var(--border-radius);
        }

        nav a:hover,
        nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        main {
            flex: 1;
            padding: 25px;
            background-color: #f4f7f6;
        }

        footer {
            background-color: var(--primary-color);
            color: white;
            text-align: center;
            padding: 15px;
            margin-top: auto;
        }

        /* Dashboard */
        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .card {
            background-color: white;
            border-radius: var(--border-radius);
            padding: 18px;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border-left: 5px solid var(--secondary-color);
            display: flex;
            flex-direction: column;
            min-height: 180px;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .card-header i {
            font-size: 1.1rem;
            color: var(--secondary-color);
        }

        .card-header h3 {
            color: var(--primary-color);
            font-size: 1rem;
            margin: 0;
            font-weight: 600;
        }

        .card-content {
            text-align: center;
            margin-bottom: 10px;
        }

        .count {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--secondary-color);
            display: block;
            margin-bottom: 8px;
        }

        .card-details {
            font-size: 0.8rem;
            color: #555;
            text-align: left;
            border-top: 1px solid #eee;
            padding-top: 8px;
            margin-top: auto;
            max-height: 80px;
            overflow-y: auto;
        }

        .card-details::-webkit-scrollbar {
            width: 5px;
        }
        .card-details::-webkit-scrollbar-thumb {
            background-color: #ccc;
            border-radius: 3px;
        }
        .card-details::-webkit-scrollbar-track {
            background-color: #f1f1f1;
        }

        .card-details p {
            margin-bottom: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .card-details strong {
            font-weight: 600;
            color: var(--dark-color);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 70%;
        }
        .card-details span {
            font-weight: bold;
            color: var(--secondary-color);
            margin-left: 5px;
        }

        .dashboard-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .chart-container {
            background-color: white;
            padding: 20px;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
        }

        .chart-container h3 {
            text-align: center;
            font-size: 1.1rem;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .chart-filters {
            text-align: center;
            margin-bottom: 15px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 5px;
        }

        .chart-filters .btn {
            padding: 6px 12px;
            font-size: 0.85rem;
            margin: 0;
        }

        .chart-filters .btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Estilos específicos para o Dashboard de Colaboradores */
        .colaborador-filter {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .colaborador-filter .btn {
            padding: 8px 15px;
            font-size: 0.9rem;
            border-radius: 20px;
        }

        .performance-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }

        .performance-indicator .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .performance-indicator .high {
            background-color: var(--success-color);
        }

        .performance-indicator .medium {
            background-color: var(--warning-color);
        }

        .performance-indicator .low {
            background-color: var(--danger-color);
        }

        .performance-indicator span {
            font-size: 0.9rem;
            color: #555;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Estilos para abas internas do dashboard */
        .dashboard-tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
            overflow-x: auto;
        }

        .dashboard-tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            font-weight: 600;
            color: #555;
            transition: var(--transition);
            white-space: nowrap;
        }

        .dashboard-tab:hover {
            color: var(--secondary-color);
        }

        .dashboard-tab.active {
            color: var(--secondary-color);
            border-bottom-color: var(--secondary-color);
        }

        .dashboard-tab-content {
            display: none;
        }

        .dashboard-tab-content.active {
            display: block;
        }

        /* Estilos para tabelas de ranking */
        .ranking-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .ranking-table th, 
        .ranking-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .ranking-table th {
            font-weight: 600;
            color: var(--primary-color);
            background-color: #f9f9f9;
        }

        .ranking-table tr:hover {
            background-color: #f5f5f5;
        }

        .ranking-table .rank {
            font-weight: 700;
            text-align: center;
            width: 40px;
        }

        .ranking-table .rank-1 {
            color: gold;
        }

        .ranking-table .rank-2 {
            color: silver;
        }

        .ranking-table .rank-3 {
            color: #cd7f32; /* Bronze */
        }

        .ranking-table .value {
            font-weight: 600;
            color: var(--secondary-color);
            text-align: right;
        }

        /* Estilos para o calendário de presença */
        .presence-calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-top: 15px;
        }

        .calendar-header {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 5px;
            margin-bottom: 5px;
        }

        .calendar-header span {
            text-align: center;
            font-weight: 600;
            font-size: 0.8rem;
            color: var(--primary-color);
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 4px;
            font-size: 0.8rem;
            position: relative;
            background-color: #f9f9f9;
            border: 1px solid #eee;
        }

        .calendar-day.present {
            background-color: rgba(46, 204, 113, 0.2);
            border-color: rgba(46, 204, 113, 0.3);
        }

        .calendar-day.absent {
            background-color: rgba(231, 76, 60, 0.2);
            border-color: rgba(231, 76, 60, 0.3);
        }

        .calendar-day.partial {
            background-color: rgba(243, 156, 18, 0.2);
            border-color: rgba(243, 156, 18, 0.3);
        }

        .calendar-day.weekend {
            background-color: #f0f0f0;
            color: #aaa;
        }

        .calendar-day.today {
            border: 2px solid var(--secondary-color);
            font-weight: 700;
        }

        .calendar-day .tooltip {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 0.75rem;
            white-space: nowrap;
            visibility: hidden;
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 10;
        }

        .calendar-day:hover .tooltip {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body>
    <!-- Container de Login -->
    <div id="login-container" style="display: none;">
        <div class="login-form">
            <h2><i class="fas fa-user-lock"></i> Login</h2>
            <div class="sales-message">
                <p><strong>Sistema de Gerenciamento de Marmoraria</strong></p>
                <p>Faça login para acessar todas as funcionalidades do sistema.</p>
            </div>
            <form id="login-form">
                <div class="form-group">
                    <label for="email">E-mail:</label>
                    <input type="email" id="email" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn primary-btn"><i class="fas fa-sign-in-alt"></i> Entrar</button>
            </form>
        </div>
    </div>

    <!-- Conteúdo Principal -->
    <div id="main-content">
        <header>
            <h1><i class="fas fa-gem"></i> Sistema de Gerenciamento de Marmoraria</h1>
            <button id="logout-btn" class="btn secondary-btn"><i class="fas fa-sign-out-alt"></i> Sair</button>
        </header>

        <nav>
            <ul>
                <li><a href="#" data-tab="dashboard" class="active"><i class="fas fa-chart-line"></i> Dashboard</a></li>
                <li><a href="#" data-tab="maquinas"><i class="fas fa-cogs"></i> Máquinas</a></li>
                <li><a href="#" data-tab="pecas"><i class="fas fa-tools"></i> Peças</a></li>
                <li><a href="#" data-tab="operacoes"><i class="fas fa-tasks"></i> Operações</a></li>
                <li><a href="#" data-tab="manutencoes"><i class="fas fa-wrench"></i> Manutenções</a></li>
                <li><a href="#" data-tab="alertas"><i class="fas fa-bell"></i> Alertas</a></li>
                <li><a href="#" data-tab="dashboard-colaboradores"><i class="fas fa-users"></i> Dashboard Colaboradores</a></li>
            </ul>
        </nav>

        <main>
            <!-- Dashboard Colaboradores -->
            <section id="dashboard-colaboradores" class="tab-content">
                <h2><i class="fas fa-users"></i> Dashboard de Colaboradores</h2>
                
                <!-- Filtro de Colaboradores -->
                <div class="colaborador-filter">
                    <button class="btn secondary-btn active" data-filter="todos"><i class="fas fa-users"></i> Todos</button>
                    <button class="btn secondary-btn" data-filter="joao"><i class="fas fa-user"></i> João Silva</button>
                    <button class="btn secondary-btn" data-filter="maria"><i class="fas fa-user"></i> Maria Oliveira</button>
                    <button class="btn secondary-btn" data-filter="pedro"><i class="fas fa-user"></i> Pedro Santos</button>
                    <button class="btn secondary-btn" data-filter="ana"><i class="fas fa-user"></i> Ana Costa</button>
                    <button class="btn secondary-btn" data-filter="carlos"><i class="fas fa-user"></i> Carlos Ferreira</button>
                </div>
                
                <!-- Cards de Métricas -->
                <div class="dashboard-cards">
                    <!-- Card de Produção Mensal -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-chart-area"></i>
                            <h3>Produção Mensal (m²)</h3>
                        </div>
                        <div class="card-content">
                            <span class="count">487</span>
                            <p>Total de m² produzidos no mês</p>
                        </div>
                        <div class="card-details">
                            <p><strong>João Silva</strong> <span>120 m²</span></p>
                            <p><strong>Maria Oliveira</strong> <span>98 m²</span></p>
                            <p><strong>Pedro Santos</strong> <span>105 m²</span></p>
                            <p><strong>Ana Costa</strong> <span>89 m²</span></p>
                            <p><strong>Carlos Ferreira</strong> <span>75 m²</span></p>
                        </div>
                    </div>
                    
                    <!-- Card de Faturamento -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-dollar-sign"></i>
                            <h3>Faturamento Mensal</h3>
                        </div>
                        <div class="card-content">
                            <span class="count">R$ 48.700</span>
                            <p>Total faturado no mês</p>
                        </div>
                        <div class="card-details">
                            <p><strong>João Silva</strong> <span>R$ 12.000</span></p>
                            <p><strong>Maria Oliveira</strong> <span>R$ 9.800</span></p>
                            <p><strong>Pedro Santos</strong> <span>R$ 10.500</span></p>
                            <p><strong>Ana Costa</strong> <span>R$ 8.900</span></p>
                            <p><strong>Carlos Ferreira</strong> <span>R$ 7.500</span></p>
                        </div>
                    </div>
                    
                    <!-- Card de Produtividade -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-tachometer-alt"></i>
                            <h3>Produtividade (m²/h)</h3>
                        </div>
                        <div class="card-content">
                            <span class="count">2.4</span>
                            <p>Média de m² por hora</p>
                        </div>
                        <div class="card-details">
                            <p><strong>João Silva</strong> <span>2.8</span></p>
                            <p><strong>Maria Oliveira</strong> <span>2.5</span></p>
                            <p><strong>Pedro Santos</strong> <span>2.3</span></p>
                            <p><strong>Ana Costa</strong> <span>2.2</span></p>
                            <p><strong>Carlos Ferreira</strong> <span>2.0</span></p>
                        </div>
                    </div>
                    
                    <!-- Card de Faltas -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-calendar-times"></i>
                            <h3>Faltas no Mês</h3>
                        </div>
                        <div class="card-content">
                            <span class="count">7</span>
                            <p>Total de faltas no mês</p>
                        </div>
                        <div class="card-details">
                            <p><strong>João Silva</strong> <span>0</span></p>
                            <p><strong>Maria Oliveira</strong> <span>1</span></p>
                            <p><strong>Pedro Santos</strong> <span>2</span></p>
                            <p><strong>Ana Costa</strong> <span>1</span></p>
                            <p><strong>Carlos Ferreira</strong> <span>3</span></p>
                        </div>
                    </div>
                    
                    <!-- Card de Erros e Desperdícios -->
                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-exclamation-triangle"></i>
                            <h3>Erros e Desperdícios</h3>
                        </div>
                        <div class="card-content">
                            <span class="count">R$ 3.450</span>
                            <p>Custo total de erros no mês</p>
                        </div>
                        <div class="card-details">
                            <p><strong>João Silva</strong> <span>R$ 350</span></p>
                            <p><strong>Maria Oliveira</strong> <span>R$ 420</span></p>
                            <p><strong>Pedro Santos</strong> <span>R$ 980</span></p>
                            <p><strong>Ana Costa</strong> <span>R$ 650</span></p>
                            <p><strong>Carlos Ferreira</strong> <span>R$ 1.050</span></p>
                        </div>
                    </div>
                </div>
                
                <!-- Abas do Dashboard -->
                <div class="dashboard-tabs">
                    <div class="dashboard-tab active" data-tab="producao">Produção</div>
                    <div class="dashboard-tab" data-tab="presenca">Presença</div>
                    <div class="dashboard-tab" data-tab="erros">Erros e Desperdícios</div>
                    <div class="dashboard-tab" data-tab="ranking">Ranking</div>
                </div>
                
                <!-- Conteúdo das Abas -->
                <div class="dashboard-tab-content active" id="tab-producao">
                    <!-- Gráficos de Produção -->
                    <div class="dashboard-charts">
                        <!-- Gráfico de Produção Diária -->
                        <div class="chart-container">
                            <h3>Produção Diária (m²)</h3>
                            <div class="chart-filters">
                                <button class="btn secondary-btn active" data-period="7">7 dias</button>
                                <button class="btn secondary-btn" data-period="15">15 dias</button>
                                <button class="btn secondary-btn" data-period="30">30 dias</button>
                            </div>
                            <canvas id="producao-diaria-chart"></canvas>
                        </div>
                        
                        <!-- Gráfico de Produção Mensal -->
                        <div class="chart-container">
                            <h3>Produção Mensal (m²)</h3>
                            <div class="chart-filters">
                                <button class="btn secondary-btn active" data-period="6">6 meses</button>
                                <button class="btn secondary-btn" data-period="12">12 meses</button>
                            </div>
                            <canvas id="producao-mensal-chart"></canvas>
                        </div>
                        
                        <!-- Gráfico de Produtividade -->
                        <div class="chart-container">
                            <h3>Produtividade por Colaborador (m²/h)</h3>
                            <canvas id="produtividade-chart"></canvas>
                        </div>
                        
                        <!-- Gráfico de Faturamento -->
                        <div class="chart-container">
                            <h3>Faturamento por Colaborador (R$)</h3>
                            <canvas id="faturamento-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-tab-content" id="tab-presenca">
                    <!-- Gráficos e Dados de Presença -->
                    <div class="dashboard-charts">
                        <!-- Gráfico de Faltas -->
                        <div class="chart-container">
                            <h3>Faltas por Mês</h3>
                            <canvas id="faltas-chart"></canvas>
                        </div>
                        
                        <!-- Gráfico de Atrasos -->
                        <div class="chart-container">
                            <h3>Atrasos por Mês (minutos)</h3>
                            <canvas id="atrasos-chart"></canvas>
                        </div>
                        
                        <!-- Calendário de Presença -->
                        <div class="chart-container">
                            <h3>Calendário de Presença - Junho/2025</h3>
                            <div class="calendar-header">
                                <span>Dom</span>
                                <span>Seg</span>
                                <span>Ter</span>
                                <span>Qua</span>
                                <span>Qui</span>
                                <span>Sex</span>
                                <span>Sáb</span>
                            </div>
                            <div class="presence-calendar">
                                <!-- Dias do calendário serão gerados via JavaScript -->
                            </div>
                            <div style="margin-top: 15px; display: flex; gap: 15px; justify-content: center;">
                                <div class="performance-indicator">
                                    <div class="indicator present"></div>
                                    <span>Presente</span>
                                </div>
                                <div class="performance-indicator">
                                    <div class="indicator partial"></div>
                                    <span>Atraso</span>
                                </div>
                                <div class="performance-indicator">
                                    <div class="indicator absent"></div>
                                    <span>Ausente</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Gráfico de Horas Trabalhadas -->
                        <div class="chart-container">
                            <h3>Horas Trabalhadas por Semana</h3>
                            <canvas id="horas-chart"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-tab-content" id="tab-erros">
                    <!-- Gráficos e Dados de Erros -->
                    <div class="dashboard-charts">
                        <!-- Gráfico de Erros por Tipo -->
                        <div class="chart-container">
                            <h3>Erros por Tipo</h3>
                            <canvas id="erros-tipo-chart"></canvas>
                        </div>
                        
                        <!-- Gráfico de Custo de Erros -->
                        <div class="chart-container">
                            <h3>Custo de Erros por Colaborador (R$)</h3>
                            <canvas id="erros-custo-chart"></canvas>
                        </div>
                        
                        <!-- Gráfico de Tendência de Erros -->
                        <div class="chart-container">
                            <h3>Tendência de Erros (Últimos 6 Meses)</h3>
                            <canvas id="erros-tendencia-chart"></canvas>
                        </div>
                        
                        <!-- Tabela de Erros Recentes -->
                        <div class="chart-container">
                            <h3>Erros Recentes</h3>
                            <table class="ranking-table">
                                <thead>
                                    <tr>
                                        <th>Data</th>
                                        <th>Colaborador</th>
                                        <th>Tipo</th>
                                        <th>Custo</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>01/06/2025</td>
                                        <td>Carlos Ferreira</td>
                                        <td>Desperdício de Material</td>
                                        <td class="value">R$ 350</td>
                                    </tr>
                                    <tr>
                                        <td>28/05/2025</td>
                                        <td>Pedro Santos</td>
                                        <td>Erro de Produção</td>
                                        <td class="value">R$ 420</td>
                                    </tr>
                                    <tr>
                                        <td>25/05/2025</td>
                                        <td>Ana Costa</td>
                                        <td>Retrabalho</td>
                                        <td class="value">R$ 280</td>
                                    </tr>
                                    <tr>
                                        <td>22/05/2025</td>
                                        <td>Maria Oliveira</td>
                                        <td>Desperdício de Material</td>
                                        <td class="value">R$ 180</td>
                                    </tr>
                                    <tr>
                                        <td>20/05/2025</td>
                                        <td>Carlos Ferreira</td>
                                        <td>Erro de Produção</td>
                                        <td class="value">R$ 320</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-tab-content" id="tab-ranking">
                    <!-- Rankings de Desempenho -->
                    <div class="dashboard-charts">
                        <!-- Ranking de Produtividade -->
                        <div class="chart-container">
                            <h3>Ranking de Produtividade</h3>
                            <table class="ranking-table">
                                <thead>
                                    <tr>
                                        <th class="rank">Pos.</th>
                                        <th>Colaborador</th>
                                        <th>Produtividade (m²/h)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="rank rank-1">1</td>
                                        <td>João Silva</td>
                                        <td class="value">2.8</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-2">2</td>
                                        <td>Maria Oliveira</td>
                                        <td class="value">2.5</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-3">3</td>
                                        <td>Pedro Santos</td>
                                        <td class="value">2.3</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">4</td>
                                        <td>Ana Costa</td>
                                        <td class="value">2.2</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">5</td>
                                        <td>Carlos Ferreira</td>
                                        <td class="value">2.0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Ranking de Produção -->
                        <div class="chart-container">
                            <h3>Ranking de Produção</h3>
                            <table class="ranking-table">
                                <thead>
                                    <tr>
                                        <th class="rank">Pos.</th>
                                        <th>Colaborador</th>
                                        <th>Produção Mensal (m²)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="rank rank-1">1</td>
                                        <td>João Silva</td>
                                        <td class="value">120</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-2">2</td>
                                        <td>Pedro Santos</td>
                                        <td class="value">105</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-3">3</td>
                                        <td>Maria Oliveira</td>
                                        <td class="value">98</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">4</td>
                                        <td>Ana Costa</td>
                                        <td class="value">89</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">5</td>
                                        <td>Carlos Ferreira</td>
                                        <td class="value">75</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Ranking de Assiduidade -->
                        <div class="chart-container">
                            <h3>Ranking de Assiduidade</h3>
                            <table class="ranking-table">
                                <thead>
                                    <tr>
                                        <th class="rank">Pos.</th>
                                        <th>Colaborador</th>
                                        <th>Faltas no Mês</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="rank rank-1">1</td>
                                        <td>João Silva</td>
                                        <td class="value">0</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-2">2</td>
                                        <td>Maria Oliveira</td>
                                        <td class="value">1</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-2">2</td>
                                        <td>Ana Costa</td>
                                        <td class="value">1</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">4</td>
                                        <td>Pedro Santos</td>
                                        <td class="value">2</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">5</td>
                                        <td>Carlos Ferreira</td>
                                        <td class="value">3</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Ranking de Qualidade -->
                        <div class="chart-container">
                            <h3>Ranking de Qualidade</h3>
                            <table class="ranking-table">
                                <thead>
                                    <tr>
                                        <th class="rank">Pos.</th>
                                        <th>Colaborador</th>
                                        <th>Custo de Erros (R$)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td class="rank rank-1">1</td>
                                        <td>João Silva</td>
                                        <td class="value">350</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-2">2</td>
                                        <td>Maria Oliveira</td>
                                        <td class="value">420</td>
                                    </tr>
                                    <tr>
                                        <td class="rank rank-3">3</td>
                                        <td>Ana Costa</td>
                                        <td class="value">650</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">4</td>
                                        <td>Pedro Santos</td>
                                        <td class="value">980</td>
                                    </tr>
                                    <tr>
                                        <td class="rank">5</td>
                                        <td>Carlos Ferreira</td>
                                        <td class="value">1.050</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <footer>
            <p>&copy; 2025 Sistema de Gerenciamento de Marmoraria - Versão 4.0</p>
        </footer>
    </div>

    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>

    <script>
        // Configuração do Firebase
        const firebaseConfig = {
            apiKey: "AIzaSyBCHRxTWmcXPLdXUDmJhfGYe8rPgQ2GpJA",
            authDomain: "marmoraria-simples.firebaseapp.com",
            projectId: "marmoraria-simples",
            storageBucket: "marmoraria-simples.appspot.com",
            messagingSenderId: "581418866430",
            appId: "1:581418866430:web:c6f0e3929b8c33e0a0c0a1"
        };
        
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
        
        // Verificar estado de autenticação
        auth.onAuthStateChanged(user => {
            if (user) {
                document.getElementById('login-container').style.display = 'none';
                document.getElementById('main-content').style.display = 'flex';
                carregarDados();
            } else {
                document.getElementById('login-container').style.display = 'flex';
                document.getElementById('main-content').style.display = 'none';
            }
        });
        
        // Login
        document.getElementById('login-form').addEventListener('submit', e => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            
            auth.signInWithEmailAndPassword(email, password)
                .catch(error => {
                    alert('Erro de login: ' + error.message);
                });
        });
        
        // Logout
        document.getElementById('logout-btn').addEventListener('click', () => {
            auth.signOut();
        });
        
        // Navegação por abas
        document.querySelectorAll('nav a').forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                const tabId = link.getAttribute('data-tab');
                
                // Atualizar links ativos
                document.querySelectorAll('nav a').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Mostrar conteúdo da aba
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
                document.querySelectorAll('.tab-content').forEach(tab => tab.classList.add('hidden'));
                const tabContent = document.getElementById(tabId);
                if (tabContent) {
                    tabContent.classList.remove('hidden');
                    tabContent.classList.add('active');
                    
                    // Se for a aba de dashboard de colaboradores, inicializar os gráficos
                    if (tabId === 'dashboard-colaboradores') {
                        inicializarGraficos();
                        gerarCalendarioPresenca();
                    }
                }
            });
        });
        
        // Navegação por abas internas do dashboard
        document.querySelectorAll('.dashboard-tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Atualizar abas ativas
                document.querySelectorAll('.dashboard-tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Mostrar conteúdo da aba
                document.querySelectorAll('.dashboard-tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById('tab-' + tabId).classList.add('active');
            });
        });
        
        // Filtro de colaboradores
        document.querySelectorAll('.colaborador-filter .btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const filtro = btn.getAttribute('data-filter');
                
                // Atualizar botões ativos
                document.querySelectorAll('.colaborador-filter .btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // Aplicar filtro aos gráficos
                aplicarFiltroColaborador(filtro);
            });
        });
        
        // Função para aplicar filtro de colaborador
        function aplicarFiltroColaborador(filtro) {
            // Aqui seria implementada a lógica para filtrar os dados por colaborador
            console.log('Filtro aplicado:', filtro);
            
            // Atualizar gráficos com o filtro
            atualizarGraficos(filtro);
        }
        
        // Função para carregar dados
        function carregarDados() {
            // Aqui seria implementada a lógica para carregar dados do Firebase
            console.log('Carregando dados...');
            
            // Inicializar gráficos após carregar dados
            inicializarGraficos();
            gerarCalendarioPresenca();
        }
        
        // Função para inicializar gráficos
        function inicializarGraficos() {
            // Registrar plugin de datalabels
            Chart.register(ChartDataLabels);
            
            // Configurações comuns para gráficos de barra
            const barOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        display: false
                    },
                    datalabels: {
                        color: '#fff',
                        font: {
                            weight: 'bold'
                        },
                        backgroundColor: function(context) {
                            return context.dataset.backgroundColor;
                        },
                        borderRadius: 4,
                        padding: 4,
                        formatter: function(value) {
                            return value;
                        }
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true,
                        display: false
                    }
                }
            };
            
            // Gráfico de Produção Diária
            const ctxProducaoDiaria = document.getElementById('producao-diaria-chart').getContext('2d');
            const producaoDiariaChart = new Chart(ctxProducaoDiaria, {
                type: 'bar',
                data: {
                    labels: ['26/05', '27/05', '28/05', '29/05', '30/05', '31/05', '01/06'],
                    datasets: [{
                        label: 'Produção Diária (m²)',
                        data: [18, 15, 20, 22, 17, 0, 19],
                        backgroundColor: '#3498db',
                        borderColor: '#2980b9',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Produção Mensal
            const ctxProducaoMensal = document.getElementById('producao-mensal-chart').getContext('2d');
            const producaoMensalChart = new Chart(ctxProducaoMensal, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Produção Mensal (m²)',
                        data: [420, 390, 450, 480, 510, 487],
                        backgroundColor: '#2ecc71',
                        borderColor: '#27ae60',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Produtividade
            const ctxProdutividade = document.getElementById('produtividade-chart').getContext('2d');
            const produtividadeChart = new Chart(ctxProdutividade, {
                type: 'bar',
                data: {
                    labels: ['João Silva', 'Maria Oliveira', 'Pedro Santos', 'Ana Costa', 'Carlos Ferreira'],
                    datasets: [{
                        label: 'Produtividade (m²/h)',
                        data: [2.8, 2.5, 2.3, 2.2, 2.0],
                        backgroundColor: '#9b59b6',
                        borderColor: '#8e44ad',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Faturamento
            const ctxFaturamento = document.getElementById('faturamento-chart').getContext('2d');
            const faturamentoChart = new Chart(ctxFaturamento, {
                type: 'bar',
                data: {
                    labels: ['João Silva', 'Maria Oliveira', 'Pedro Santos', 'Ana Costa', 'Carlos Ferreira'],
                    datasets: [{
                        label: 'Faturamento (R$)',
                        data: [12000, 9800, 10500, 8900, 7500],
                        backgroundColor: '#f1c40f',
                        borderColor: '#f39c12',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Faltas
            const ctxFaltas = document.getElementById('faltas-chart').getContext('2d');
            const faltasChart = new Chart(ctxFaltas, {
                type: 'bar',
                data: {
                    labels: ['João Silva', 'Maria Oliveira', 'Pedro Santos', 'Ana Costa', 'Carlos Ferreira'],
                    datasets: [{
                        label: 'Faltas no Mês',
                        data: [0, 1, 2, 1, 3],
                        backgroundColor: '#e74c3c',
                        borderColor: '#c0392b',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Atrasos
            const ctxAtrasos = document.getElementById('atrasos-chart').getContext('2d');
            const atrasosChart = new Chart(ctxAtrasos, {
                type: 'bar',
                data: {
                    labels: ['João Silva', 'Maria Oliveira', 'Pedro Santos', 'Ana Costa', 'Carlos Ferreira'],
                    datasets: [{
                        label: 'Atrasos (minutos)',
                        data: [15, 45, 60, 30, 90],
                        backgroundColor: '#f39c12',
                        borderColor: '#d35400',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Horas Trabalhadas
            const ctxHoras = document.getElementById('horas-chart').getContext('2d');
            const horasChart = new Chart(ctxHoras, {
                type: 'bar',
                data: {
                    labels: ['Semana 1', 'Semana 2', 'Semana 3', 'Semana 4'],
                    datasets: [
                        {
                            label: 'João Silva',
                            data: [42, 44, 40, 43],
                            backgroundColor: '#3498db'
                        },
                        {
                            label: 'Maria Oliveira',
                            data: [40, 38, 42, 41],
                            backgroundColor: '#2ecc71'
                        },
                        {
                            label: 'Pedro Santos',
                            data: [41, 39, 36, 40],
                            backgroundColor: '#9b59b6'
                        },
                        {
                            label: 'Ana Costa',
                            data: [40, 42, 39, 38],
                            backgroundColor: '#f1c40f'
                        },
                        {
                            label: 'Carlos Ferreira',
                            data: [38, 35, 37, 36],
                            backgroundColor: '#e74c3c'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        datalabels: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Horas'
                            }
                        }
                    }
                }
            });
            
            // Gráfico de Erros por Tipo
            const ctxErrosTipo = document.getElementById('erros-tipo-chart').getContext('2d');
            const errosTipoChart = new Chart(ctxErrosTipo, {
                type: 'pie',
                data: {
                    labels: ['Erro de Produção', 'Desperdício de Material', 'Retrabalho', 'Outro'],
                    datasets: [{
                        data: [35, 40, 20, 5],
                        backgroundColor: ['#3498db', '#e74c3c', '#f39c12', '#95a5a6'],
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom'
                        },
                        datalabels: {
                            color: '#fff',
                            font: {
                                weight: 'bold'
                            },
                            formatter: function(value, context) {
                                return value + '%';
                            }
                        }
                    }
                }
            });
            
            // Gráfico de Custo de Erros
            const ctxErrosCusto = document.getElementById('erros-custo-chart').getContext('2d');
            const errosCustoChart = new Chart(ctxErrosCusto, {
                type: 'bar',
                data: {
                    labels: ['João Silva', 'Maria Oliveira', 'Pedro Santos', 'Ana Costa', 'Carlos Ferreira'],
                    datasets: [{
                        label: 'Custo de Erros (R$)',
                        data: [350, 420, 980, 650, 1050],
                        backgroundColor: '#e74c3c',
                        borderColor: '#c0392b',
                        borderWidth: 1
                    }]
                },
                options: barOptions
            });
            
            // Gráfico de Tendência de Erros
            const ctxErrosTendencia = document.getElementById('erros-tendencia-chart').getContext('2d');
            const errosTendenciaChart = new Chart(ctxErrosTendencia, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
                    datasets: [{
                        label: 'Custo Total de Erros (R$)',
                        data: [4200, 3800, 4500, 3900, 3600, 3450],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        },
                        datalabels: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }
        
        // Função para atualizar gráficos com filtro
        function atualizarGraficos(filtro) {
            // Aqui seria implementada a lógica para atualizar os gráficos com base no filtro
            console.log('Atualizando gráficos com filtro:', filtro);
            
            // Exemplo de atualização (simulado)
            if (filtro !== 'todos') {
                // Mostrar mensagem de filtro aplicado
                alert('Filtro aplicado: ' + filtro + '\n\nOs gráficos mostrariam apenas os dados deste colaborador.');
            }
        }
        
        // Função para gerar calendário de presença
        function gerarCalendarioPresenca() {
            const calendarContainer = document.querySelector('.presence-calendar');
            calendarContainer.innerHTML = '';
            
            // Dados simulados de presença (1 = presente, 0.5 = atraso, 0 = ausente)
            const presencaData = {
                1: 1, 2: 1, 3: 1, 4: 1, 5: 1, 6: 0, 7: 0,
                8: 1, 9: 0.5, 10: 1, 11: 1, 12: 1, 13: 0, 14: 0,
                15: 1, 16: 1, 17: 0, 18: 1, 19: 1, 20: 0, 21: 0,
                22: 1, 23: 1, 24: 1, 25: 0.5, 26: 1, 27: 0, 28: 0,
                29: 1, 30: 1
            };
            
            // Dias da semana (0 = Domingo, 6 = Sábado)
            const diasSemana = {
                1: 6, 2: 0, 3: 1, 4: 2, 5: 3, 6: 4, 7: 5,
                8: 6, 9: 0, 10: 1, 11: 2, 12: 3, 13: 4, 14: 5,
                15: 6, 16: 0, 17: 1, 18: 2, 19: 3, 20: 4, 21: 5,
                22: 6, 23: 0, 24: 1, 25: 2, 26: 3, 27: 4, 28: 5,
                29: 6, 30: 0
            };
            
            // Data atual
            const hoje = new Date().getDate();
            
            // Gerar dias do calendário
            for (let i = 1; i <= 30; i++) {
                const dayElement = document.createElement('div');
                dayElement.className = 'calendar-day';
                dayElement.textContent = i;
                
                // Adicionar classe de fim de semana
                if (diasSemana[i] === 0 || diasSemana[i] === 6) {
                    dayElement.classList.add('weekend');
                }
                
                // Adicionar classe de presença
                if (presencaData[i] === 1) {
                    dayElement.classList.add('present');
                } else if (presencaData[i] === 0.5) {
                    dayElement.classList.add('partial');
                } else if (presencaData[i] === 0) {
                    dayElement.classList.add('absent');
                }
                
                // Marcar dia atual
                if (i === hoje) {
                    dayElement.classList.add('today');
                }
                
                // Adicionar tooltip
                const tooltip = document.createElement('div');
                tooltip.className = 'tooltip';
                if (presencaData[i] === 1) {
                    tooltip.textContent = 'Presente';
                } else if (presencaData[i] === 0.5) {
                    tooltip.textContent = 'Atraso de 30min';
                } else if (presencaData[i] === 0) {
                    tooltip.textContent = 'Ausente';
                }
                dayElement.appendChild(tooltip);
                
                calendarContainer.appendChild(dayElement);
            }
        }
        
        // Inicializar a primeira aba
        document.querySelector('nav a[data-tab="dashboard"]').click();
    </script>
</body>
</html>
