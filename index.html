<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Post-it App Moderno</title>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore-compat.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #ece9e6, #ffffff);
    }

    header {
      background-color: #420344;
      color: rgb(196, 195, 138);
      padding: 16px;
      text-align: center;
      font-size: 1.5rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .navbar {
      display: flex;
      overflow-x: auto;
      background: #420344;
      padding: 10px;
      gap: 8px;
      justify-content: center;
      scroll-snap-type: x mandatory;
    }

    .navbar button {
      scroll-snap-align: start;
      background: #e8c8f0;
      border: none;
      color: rgb(58, 6, 30);
      padding:7px 10px 7px 10px;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 0.9rem;
      white-space: nowrap;
    }

    .navbar button:hover {
      color: rgb(233, 200, 216);
      background: #560758;
      transform: scale(1.05);
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      padding: 20px;
      gap: 20px;
    }

    .postit {
      background-color: #FFF59D;
      width: 220px;
      min-height: 140px;
      padding: 15px;
      border-radius: 12px;
      box-shadow: 4px 6px 12px rgba(0,0,0,0.2);
      transform: rotate(-1deg);
      transition: transform 0.2s ease, box-shadow 0.3s ease;
      position: relative;
      word-wrap: break-word;
    }

    .postit:hover {
      transform: rotate(0deg) scale(1.03);
      box-shadow: 0 30px 80px rgba(0,0,0,0.3);
    }

    .days {      
      font-size: 1rem;
      font-weight: bold;
      color: #d33232;
      margin-bottom: 6px;
    }

    .delete-btn {
      position: absolute;
      top: 8px;
      right: 10px;
      background: transparent;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: #d63031;
    }

    .form {
      text-align: center;
      padding: 20px;
    }

    .form textarea {
      width: 90%;
      max-width: 400px;
      height: 80px;
      padding: 10px;
      border-radius: 10px;
      border: 1px solid #ccc;
      resize: none;
      font-size: 1rem;
      margin-bottom: 10px;
    }

    .form button {
      padding: 10px 20px;
      background: #4ad60a;
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .form button:hover {
      background: #971818;
    }

    /* Cores por categoria */
    .pessoal { background: #FFF59D; }
    .trabalho { background: #A5D6A7; }
    .investimentos { background: #81D4FA; }
    .motivacionais { background: #FFD180; }
    .gestao { background: #CE93D8; }
    .mimos_esposa { background: #F48FB1; }
    .mimos_filho { background: #FFE082; }
    .mimos_flavio { background: #FFAB91; }
    .mimos_casa { background: #BCAAA4; }
    .sonhos { background: #B2EBF2; }
    .reuniao { background: #E6EE9C; }
    .diario { background: #B0BEC5; }
  </style>
</head>
<body>
  <header>ğŸ“ Meu Mural de Post-its</header>

  <div class="navbar" id="navbar">
    <button onclick="changeTab('pessoal')">ğŸ‘¤ Pessoal</button>
    <button onclick="changeTab('trabalho')">ğŸ’¼ Trabalho</button>
    <button onclick="changeTab('investimentos')">ğŸ’° Investimentos</button>
    <button onclick="changeTab('motivacionais')">ğŸŒŸ Motivacionais</button>
    <button onclick="changeTab('gestao')">ğŸ“Š GestÃ£o</button>
    <button onclick="changeTab('mimos_esposa')">ğŸ’• Esposa</button>
    <button onclick="changeTab('mimos_filho')">ğŸ‘¶ Filho</button>
    <button onclick="changeTab('mimos_flavio')">ğŸ Flavio</button>
    <button onclick="changeTab('mimos_casa')">ğŸ  Casa</button>
    <button onclick="changeTab('sonhos')">ğŸŒˆ Sonhos</button>
    <button onclick="changeTab('reuniao')">ğŸ“… ReuniÃ£o</button>
    <button onclick="changeTab('diario')">ğŸ“” DiÃ¡rio</button>
  </div>

  <div class="form">
    <textarea id="noteText" placeholder="Digite sua nota..."></textarea><br>
    <button onclick="addNote()">Adicionar Post-it</button>
  </div>

  <div class="container" id="notes"></div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, serverTimestamp, query, where
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
  apiKey: "AIzaSyCMvMLlcxThYIquvAXjsuKtvznQyeGo0d4",
  authDomain: "postit-6b2f0.firebaseapp.com",
  projectId: "postit-6b2f0",
  storageBucket: "postit-6b2f0.firebasestorage.app",
  messagingSenderId: "419645960721",
  appId: "1:419645960721:web:e07c4d3a559e4b36d0b7b0"
};

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    let currentTab = 'pessoal';

    window.changeTab = function(tab) {
      currentTab = tab;
      loadNotes();
    }

    window.addNote = async function() {
      const text = document.getElementById('noteText').value;
      if (!text.trim()) return;
      await addDoc(collection(db, 'postits'), {
        text,
        category: currentTab,
        createdAt: serverTimestamp()
      });
      document.getElementById('noteText').value = '';
      loadNotes();
    }

    window.deleteNote = async function(id) {
      await deleteDoc(doc(db, 'postits', id));
      loadNotes();
    }

    async function loadNotes() {
      const container = document.getElementById('notes');
      container.innerHTML = '';
      const q = query(collection(db, 'postits'), where("category", "==", currentTab));
      const snapshot = await getDocs(q);
      snapshot.forEach(docSnap => {
        const note = docSnap.data();
        const postit = document.createElement('div');
        postit.className = 'postit';
        const createdAt = note.createdAt?.toDate?.() ?? new Date();
        const daysDiff = Math.floor((new Date() - createdAt) / (1000 * 60 * 60 * 24));
        postit.innerHTML = `
          <div class="days">${daysDiff} dias pendente</div>
          <div>${note.text}</div>
          <div class="actions"><button onclick="deleteNote('${docSnap.id}')">ğŸ—‘ï¸</button></div>
        `;
        container.appendChild(postit);
      });
    }

    loadNotes();
  </script>
</body>
</html>
