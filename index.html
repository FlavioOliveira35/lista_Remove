
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Post-it App Moderno</title>
  <style>
    /* Estilos aqui (resumidos para exemplo) */
    body { font-family: sans-serif; background: #f0f0f0; }
    .navbar { background: #333; color: #fff; display: flex; overflow-x: auto; padding: 10px; }
    .navbar button { margin-right: 5px; background: #444; color: white; border: none; border-radius: 5px; padding: 8px; cursor: pointer; }
    .container { display: flex; flex-wrap: wrap; gap: 10px; padding: 10px; }
    .postit { background: yellow; padding: 10px; border-radius: 10px; width: 200px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); position: relative; }
    .days { font-size: 0.8rem; color: #555; margin-bottom: 0.5rem; }
    .actions { position: absolute; top: 5px; right: 5px; }
    .actions button { background: none; border: none; color: red; font-size: 1rem; cursor: pointer; }
    textarea { width: 100%; height: 80px; margin-top: 10px; }
  </style>
</head>
<body>
  <div class="navbar" id="nav">
    <button onclick="changeTab('pessoal')">👤 Pessoal</button>
    <button onclick="changeTab('trabalho')">💼 Trabalho</button>
    <button onclick="changeTab('investimentos')">💰 Investimentos</button>
    <button onclick="changeTab('motivacionais')">💬 Motivacionais</button>
    <button onclick="changeTab('gestao')">📊 Gestão</button>
    <button onclick="changeTab('mimos_esposa')">💖 Esposa</button>
    <button onclick="changeTab('mimos_filho')">👶 Filho</button>
    <button onclick="changeTab('mimos_flavio')">🧘 Flavio</button>
    <button onclick="changeTab('mimos_casa')">🏠 Casa</button>
    <button onclick="changeTab('sonhos')">🌈 Sonhos</button>
    <button onclick="changeTab('reuniao')">📅 Reunião</button>
    <button onclick="changeTab('diario')">📓 Diário</button>
  </div>

  <div class="container" id="notes"></div>

  <div style="padding: 10px;">
    <textarea id="noteText" placeholder="Digite sua nota..."></textarea><br/>
    <input type="file" id="imageInput" /><br/>
    <button onclick="addNote()">Adicionar Nota</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, serverTimestamp, query, where
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCMvMLlcxThYIquvAXjsuKtvznQyeGo0d4",
  authDomain: "postit-6b2f0.firebaseapp.com",
  projectId: "postit-6b2f0",
  storageBucket: "postit-6b2f0.firebasestorage.app",
  messagingSenderId: "419645960721",
  appId: "1:419645960721:web:e07c4d3a559e4b36d0b7b0"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    let currentTab = 'pessoal';

    function changeTab(tab) {
      currentTab = tab;
      loadNotes();
    }

    async function loadNotes() {
      const container = document.getElementById('notes');
      container.innerHTML = '';
      const q = query(collection(db, 'postits'), where("category", "==", currentTab));
      const snapshot = await getDocs(q);
      snapshot.forEach(docSnap => {
        const note = docSnap.data();
        const postit = document.createElement('div');
        postit.className = 'postit';
        const createdAt = note.createdAt?.toDate?.() ?? new Date();
        const daysDiff = Math.floor((new Date() - createdAt) / (1000 * 60 * 60 * 24));
        postit.innerHTML = `
          <div class="days">${daysDiff} dias pendente</div>
          <div>${note.text}</div>
          ${note.imageURL ? `<img src="${note.imageURL}" style="width:100%;" onclick="window.open('${note.imageURL}','_blank')"/>` : ""}
          <div class="actions"><button onclick="deleteNote('${docSnap.id}')">🗑️</button></div>
        `;
        container.appendChild(postit);
      });
    }

    async function addNote() {
      const text = document.getElementById('noteText').value;
      const imageInput = document.getElementById('imageInput');
      let imageURL = '';
      if (imageInput.files[0]) {
        alert("Upload de imagem só funciona com Firebase Storage configurado.");
      }
      await addDoc(collection(db, 'postits'), {
        text,
        category: currentTab,
        createdAt: serverTimestamp(),
        imageURL
      });
      document.getElementById('noteText').value = '';
      imageInput.value = '';
      loadNotes();
    }

    async function deleteNote(id) {
      await deleteDoc(doc(db, 'postits', id));
      loadNotes();
    }

    loadNotes();
  </script>
</body>
</html>
