
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Post-it App Moderno</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f2f2f2;
    }

    .navbar {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      background-color: #333;
      overflow-x: auto;
      padding: 10px;
    }

    .navbar button {
      background-color: #444;
      border: none;
      color: white;
      padding: 10px 15px;
      margin: 5px;
      border-radius: 8px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-size: 0.9em;
    }

    .navbar button:hover {
      background-color: #666;
    }

    .container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 15px;
      padding: 15px;
    }

    .postit {
      background: #fff475;
      width: 220px;
      min-height: 150px;
      padding: 15px;
      border-radius: 10px;
      box-shadow: 5px 5px 10px rgba(0,0,0,0.2);
      position: relative;
      transform: rotate(-1deg);
      transition: transform 0.2s;
      word-wrap: break-word;
    }

    .postit:hover {
      transform: scale(1.02);
    }

    .days {
      font-size: 0.8rem;
      color: #333;
      margin-bottom: 8px;
    }

    .actions {
      position: absolute;
      top: 5px;
      right: 10px;
    }

    .actions button {
      background: none;
      border: none;
      font-size: 1.2rem;
      cursor: pointer;
      color: red;
    }

    textarea {
      width: 100%;
      padding: 8px;
      margin: 10px 0;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 1em;
    }

    .input-area {
      padding: 15px;
      text-align: center;
    }

    input[type="file"] {
      margin: 10px 0;
    }

    @media (max-width: 600px) {
      .postit {
        width: 90%;
      }

      .navbar {
        flex-direction: column;
        align-items: center;
      }
    }
  </style>
</head>
<body>
  <div class="navbar" id="nav">
    <button onclick="changeTab('pessoal')">👤 Pessoal</button>
    <button onclick="changeTab('trabalho')">💼 Trabalho</button>
    <button onclick="changeTab('investimentos')">💰 Investimentos</button>
    <button onclick="changeTab('motivacionais')">💬 Motivacionais</button>
    <button onclick="changeTab('gestao')">📊 Gestão</button>
    <button onclick="changeTab('mimos_esposa')">💖 Esposa</button>
    <button onclick="changeTab('mimos_filho')">👶 Filho</button>
    <button onclick="changeTab('mimos_flavio')">🧘 Flavio</button>
    <button onclick="changeTab('mimos_casa')">🏠 Casa</button>
    <button onclick="changeTab('sonhos')">🌈 Sonhos</button>
    <button onclick="changeTab('reuniao')">📅 Reunião</button>
    <button onclick="changeTab('diario')">📓 Diário</button>
  </div>

  <div class="container" id="notes"></div>

  <div class="input-area">
    <textarea id="noteText" placeholder="Digite sua nota..."></textarea><br/>
    <input type="file" id="imageInput" /><br/>
    <button onclick="addNote()">Adicionar Nota</button>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import {
      getFirestore, collection, addDoc, getDocs, deleteDoc, doc, updateDoc, serverTimestamp, query, where
    } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
  apiKey: "AIzaSyCMvMLlcxThYIquvAXjsuKtvznQyeGo0d4",
  authDomain: "postit-6b2f0.firebaseapp.com",
  projectId: "postit-6b2f0",
  storageBucket: "postit-6b2f0.firebasestorage.app",
  messagingSenderId: "419645960721",
  appId: "1:419645960721:web:e07c4d3a559e4b36d0b7b0"
};

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    let currentTab = 'pessoal';

    function changeTab(tab) {
      currentTab = tab;
      loadNotes();
    }

    async function loadNotes() {
      const container = document.getElementById('notes');
      container.innerHTML = '';
      const q = query(collection(db, 'postits'), where("category", "==", currentTab));
      const snapshot = await getDocs(q);
      snapshot.forEach(docSnap => {
        const note = docSnap.data();
        const postit = document.createElement('div');
        postit.className = 'postit';
        const createdAt = note.createdAt?.toDate?.() ?? new Date();
        const daysDiff = Math.floor((new Date() - createdAt) / (1000 * 60 * 60 * 24));
        postit.innerHTML = `
          <div class="days">${daysDiff} dias pendente</div>
          <div>${note.text}</div>
          ${note.imageURL ? `<img src="${note.imageURL}" style="width:100%; margin-top:10px; border-radius:5px;" onclick="window.open('${note.imageURL}','_blank')"/>` : ""}
          <div class="actions"><button onclick="deleteNote('${docSnap.id}')">🗑️</button></div>
        `;
        container.appendChild(postit);
      });
    }

    async function addNote() {
      const text = document.getElementById('noteText').value;
      const imageInput = document.getElementById('imageInput');
      let imageURL = '';
      if (imageInput.files[0]) {
        alert("Upload de imagem só funciona com Firebase Storage configurado.");
      }
      await addDoc(collection(db, 'postits'), {
        text,
        category: currentTab,
        createdAt: serverTimestamp(),
        imageURL
      });
      document.getElementById('noteText').value = '';
      imageInput.value = '';
      loadNotes();
    }

    async function deleteNote(id) {
      await deleteDoc(doc(db, 'postits', id));
      loadNotes();
    }

    loadNotes();
  </script>
</body>
</html>
